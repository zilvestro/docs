---
title: 'Transaction Events'
description: 'Webhook events for sales, commissions, and refunds'
---

## Overview

Transaction events track sales and commission lifecycle. Use these webhooks to sync revenue data, automate commission notifications, or integrate with your accounting system.

<Note>
  All transaction events except `transaction.created` and `transaction.deleted` automatically trigger a `transaction.updated` event as well, giving you a universal event for all changes.
</Note>

## Events

<AccordionGroup>
  <Accordion title="transaction.created" icon="plus">
    Triggered when a new transaction (sale) is recorded. This fires when a referred customer makes a purchase.

    ```json
    {
      "id": "evt_abc123",
      "type": "transaction.created",
      "createdAt": "2024-01-15T10:30:00.000Z",
      "data": {
        "transactionId": "txn_xyz789",
        "referralId": "ref_abc123",
        "affiliateId": "aff_def456",
        "saleAmount": 99.00,
        "saleCurrency": "USD",
        "saleStatus": "COMPLETE",
        "commissionAmount": 29.70,
        "commissionCurrency": "USD",
        "commissionStatus": "PENDING",
        "incentiveType": "COMMISSION",
        "holdPeriodDays": 30,
        "invoiceId": null,
        "createdAt": "2024-01-15T10:30:00.000Z",
        "updatedAt": "2024-01-15T10:30:00.000Z"
      }
    }
    ```
  </Accordion>

  <Accordion title="transaction.updated" icon="arrows-rotate">
    Triggered whenever a transaction is modified. This is a universal event that fires alongside other specific events (approved, paid, rejected).

    ```json
    {
      "id": "evt_abc123",
      "type": "transaction.updated",
      "createdAt": "2024-01-15T10:30:00.000Z",
      "data": {
        "transactionId": "txn_xyz789",
        "referralId": "ref_abc123",
        "affiliateId": "aff_def456",
        "saleAmount": 99.00,
        "saleCurrency": "USD",
        "saleStatus": "COMPLETE",
        "commissionAmount": 29.70,
        "commissionCurrency": "USD",
        "commissionStatus": "READY_FOR_PAYMENT",
        "incentiveType": "COMMISSION",
        "holdPeriodDays": 30,
        "invoiceId": null,
        "createdAt": "2024-01-15T10:30:00.000Z",
        "updatedAt": "2024-01-15T11:00:00.000Z"
      }
    }
    ```
  </Accordion>

  <Accordion title="transaction.approved" icon="circle-check">
    Triggered when a commission is approved and ready for payment. This happens after any hold period expires or when manually approved.

    ```json
    {
      "id": "evt_abc123",
      "type": "transaction.approved",
      "createdAt": "2024-01-15T10:30:00.000Z",
      "data": {
        "transactionId": "txn_xyz789",
        "referralId": "ref_abc123",
        "affiliateId": "aff_def456",
        "saleAmount": 99.00,
        "saleCurrency": "USD",
        "saleStatus": "COMPLETE",
        "commissionAmount": 29.70,
        "commissionCurrency": "USD",
        "commissionStatus": "READY_FOR_PAYMENT",
        "incentiveType": "COMMISSION",
        "holdPeriodDays": 30,
        "invoiceId": null,
        "createdAt": "2024-01-15T10:30:00.000Z",
        "updatedAt": "2024-02-14T10:30:00.000Z"
      }
    }
    ```
  </Accordion>

  <Accordion title="transaction.paid" icon="money-bill">
    Triggered when a commission is paid to the affiliate as part of a payout.

    ```json
    {
      "id": "evt_abc123",
      "type": "transaction.paid",
      "createdAt": "2024-01-15T10:30:00.000Z",
      "data": {
        "transactionId": "txn_xyz789",
        "referralId": "ref_abc123",
        "affiliateId": "aff_def456",
        "saleAmount": 99.00,
        "saleCurrency": "USD",
        "saleStatus": "COMPLETE",
        "commissionAmount": 29.70,
        "commissionCurrency": "USD",
        "commissionStatus": "PAID",
        "incentiveType": "COMMISSION",
        "holdPeriodDays": 30,
        "invoiceId": "inv_123",
        "createdAt": "2024-01-15T10:30:00.000Z",
        "updatedAt": "2024-02-28T10:30:00.000Z"
      }
    }
    ```
  </Accordion>

  <Accordion title="transaction.rejected" icon="ban">
    Triggered when a commission is declined or refunded. This happens when a sale is refunded or the referral is marked as fraudulent.

    ```json
    {
      "id": "evt_abc123",
      "type": "transaction.rejected",
      "createdAt": "2024-01-15T10:30:00.000Z",
      "data": {
        "transactionId": "txn_xyz789",
        "referralId": "ref_abc123",
        "affiliateId": "aff_def456",
        "saleAmount": 0,
        "saleCurrency": "USD",
        "saleStatus": "REFUNDED",
        "commissionAmount": 0,
        "commissionCurrency": "USD",
        "commissionStatus": "REFUNDED",
        "incentiveType": "COMMISSION",
        "holdPeriodDays": null,
        "invoiceId": null,
        "createdAt": "2024-01-15T10:30:00.000Z",
        "updatedAt": "2024-01-20T14:00:00.000Z"
      }
    }
    ```
  </Accordion>

  <Accordion title="transaction.deleted" icon="trash">
    Triggered when a transaction is deleted from the system.

    ```json
    {
      "id": "evt_abc123",
      "type": "transaction.deleted",
      "createdAt": "2024-01-15T10:30:00.000Z",
      "data": {
        "transactionId": "txn_xyz789",
        "referralId": "ref_abc123",
        "affiliateId": "aff_def456"
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Payload Fields

| Field | Type | Description |
|-------|------|-------------|
| `transactionId` | string | Unique identifier for the transaction |
| `referralId` | string | The referral this transaction belongs to |
| `affiliateId` | string | The affiliate who earned this commission |
| `saleAmount` | number | The sale amount (in program currency) |
| `saleCurrency` | string | Currency code (e.g., "USD") |
| `saleStatus` | string | Transaction status (see below) |
| `commissionAmount` | number | Commission amount earned |
| `commissionCurrency` | string | Commission currency code |
| `commissionStatus` | string | Commission status (see below) |
| `incentiveType` | string | Type: `COMMISSION` or `BONUS` |
| `holdPeriodDays` | number \| null | Days commission was held before approval |
| `invoiceId` | string \| null | Associated payout invoice ID |
| `createdAt` | string | ISO 8601 timestamp |
| `updatedAt` | string | ISO 8601 timestamp |

## Sale Status Values

| Status | Description |
|--------|-------------|
| `OPEN` | Transaction pending payment |
| `COMPLETE` | Payment successful |
| `TRIALING` | Subscription in trial period |
| `FAILED` | Payment failed |
| `REFUNDED` | Full refund processed |
| `PARTIAL_REFUNDED` | Partial refund processed |

## Commission Status Values

| Status | Description |
|--------|-------------|
| `PENDING` | Awaiting hold period to expire |
| `PENDING_MANUAL_APPROVAL` | Requires manual approval |
| `READY_FOR_PAYMENT` | Approved, included in next payout |
| `PROCESSING_PAYOUT` | Assigned to an active payout |
| `PAID` | Commission has been paid |
| `DECLINED` | Manually declined |
| `REFUNDED` | Declined due to refund |
| `DISPUTE` | Under dispute investigation |

## Common Use Cases

<CardGroup cols={2}>
  <Card title="Revenue Tracking" icon="chart-pie">
    Update revenue dashboards in real-time
  </Card>
  <Card title="Affiliate Notifications" icon="bell">
    Notify affiliates when they earn commissions
  </Card>
  <Card title="Accounting Integration" icon="calculator">
    Sync commission data with your accounting software
  </Card>
  <Card title="Refund Handling" icon="rotate-left">
    Automatically handle commission clawbacks on refunds
  </Card>
</CardGroup>

